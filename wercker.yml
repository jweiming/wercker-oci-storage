build:
  box: ubuntu
  steps:
    - script:
      name: Set API_KEY file
      code:  |
         #echo -ne "-----BEGIN RSA PRIVATE KEY-----\n" > api.pem
         echo -ne (cat $OCI_API_KEY | tr " " "\n")
         #echo -ne "-----END RSA PRIVATE KEY-----\n" >> api.pem
         #echo -ne $(cat api.pem)
    - wercker/oci-objectstore@1.2.0:
      region:       $OCI_REGION
      tenancy-ocid: $OCID_TENANCY
      user-ocid:    $OCID_USER
      fingerprint:  $OCI_FINGERPRINT
      api-key:      "$(cat api.pem)"
      namespace:    $OCI_NAMESPACE
      bucket-name:  $OCI_BUCKETNAME
      command:      get
      object-name:  kubeconfig
    - wercker/kubectl@3.9.0:
      raw-args:     --kubeconfig=kubeconfig
      command:      get nodes
    
